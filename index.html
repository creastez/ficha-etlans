<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ficha ETLANS</title>
<link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
<style>
:root{
  --accent:#7b82ff;
  --bg:#0b0d12;
  --panel:#141826;
  --panel2:#1c2140;
  --ink:#e8e9f1;
  --muted:#9aa0c3;
  --border:#2a2f4a;
}
[data-theme="red"]{--accent:#ff5c5c}
[data-theme="gold"]{--accent:#e6c15a}
[data-theme="emerald"]{--accent:#4cd3a3}
[data-theme="rose"]{--accent:#c97bff}
[data-theme="white"]{--accent:#eaeaea;--ink:#111;--bg:#f2f2f2;--panel:#fff;--panel2:#f5f5f5;--border:#ccc}

*{box-sizing:border-box}
body{margin:0;background:radial-gradient(circle at top,#151a2e,var(--bg) 70%);color:var(--ink);font-family:Inter,sans-serif;overflow-x:hidden}
.sheet{max-width:1400px;margin:24px auto;padding:28px;background:linear-gradient(180deg,var(--panel),var(--bg));border:1px solid var(--border);border-radius:16px;box-shadow:0 0 40px #000;overflow:hidden}
.title{font-family:Cinzel,serif;text-align:center;font-size:46px;letter-spacing:3px;margin-bottom:28px}
.section{margin-bottom:30px}
.section-title{font-family:Cinzel,serif;font-size:15px;letter-spacing:1px;color:#fff;background:linear-gradient(90deg,var(--accent),transparent);padding:8px 16px;border-radius:10px;margin-bottom:14px}
.row{display:flex;gap:20px;flex-wrap:wrap}
.field{display:flex;flex-direction:column;gap:4px;min-width:220px;flex:1}
.field label{font-size:12px;color:var(--muted)}
.field input,.field textarea{background:transparent;border:none;border-bottom:1px solid var(--border);color:var(--ink);padding:6px 4px;font-family:Inter}
.field textarea{resize:none;min-height:90px}
.small{width:70px}

.attrs{display:grid;grid-template-columns:repeat(3,1fr);gap:26px}
.attr-block{background:var(--panel);padding:16px;border-radius:14px;border:1px solid var(--border)}
.attr{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}
.attr span{font-size:13px}

.pericias-wrap{display:grid;grid-template-columns:340px 1fr;gap:30px}
.pericias{background:var(--panel);border-radius:14px;padding:16px;border:1px solid var(--border);overflow:hidden}
.pericia{display:grid;grid-template-columns:1fr 70px;gap:10px;align-items:center;margin-bottom:8px;cursor:pointer}
.pericia span{font-size:13px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}
.pericia input{width:100%;text-align:right;background:transparent;border:none;border-bottom:1px solid var(--border);color:var(--ink)}

.combate{background:var(--panel);border-radius:14px;padding:16px;border:1px solid var(--border);overflow:hidden}
.combate table{width:100%;border-collapse:collapse;table-layout:fixed}
.combate th,.combate td{border-bottom:1px solid var(--border);padding:10px;font-size:12px}
.combate th{color:var(--muted)}
.combate input{width:100%;background:transparent;border:none;border-bottom:1px solid var(--border);color:var(--ink)}

.status{display:flex;gap:18px;flex-wrap:wrap;margin-top:18px}
.status-box{background:var(--panel2);border:1px solid var(--border);border-radius:14px;width:130px;padding:14px;text-align:center}
.status-box label{font-size:11px;color:var(--muted)}
.status-box input{margin-top:8px;width:90px;font-size:20px;text-align:center;background:transparent;border:none;border-bottom:1px solid var(--border);color:var(--ink)}

.effects-wrapper{background:var(--panel2);border:1px solid var(--border);border-radius:14px;padding:12px;max-width:100%;overflow:hidden}
.effects{display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:6px}
.effects label{font-size:12px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}

.list{display:flex;flex-direction:column;gap:12px}
.list-item{background:var(--panel2);border:1px solid var(--border);border-radius:12px;padding:12px;display:grid;grid-template-columns:1fr 80px auto;gap:12px;cursor:pointer}
.list-item textarea{grid-column:1/-1}
.list-item input,.list-item textarea{background:transparent;border:none;border-bottom:1px solid var(--border);color:var(--ink)}

.large-notes textarea{min-height:320px;width:100%;background:transparent;border:1px solid var(--border);color:var(--ink);padding:12px;border-radius:12px}

button{background:linear-gradient(135deg,var(--accent),#4b54ff);border:none;color:#fff;padding:10px 18px;border-radius:14px;font-size:12px;cursor:pointer}

.floating{position:fixed;bottom:20px;right:20px;display:flex;gap:14px;z-index:10}
.theme-panel{position:fixed;bottom:80px;right:20px;display:none;gap:12px}
.theme-circle{width:30px;height:30px;border-radius:50%;cursor:pointer;border:2px solid #000}

.modal{position:fixed;inset:0;background:#000a;display:none;align-items:center;justify-content:center}
.modal-content{background:var(--panel);padding:22px;border-radius:16px;width:380px;border:1px solid var(--border)}
.modal-content textarea{width:100%;min-height:120px;background:transparent;border:1px solid var(--border);color:var(--ink)}
</style>
</head>
<body>
<div class="sheet" id="sheet">
<div class="title">ETLANS</div>

<div class="section">
<div class="row">
<div class="field"><label>Nome do Personagem</label><input></div>
<div class="field"><label>Nome do Jogador</label><input></div>
<div class="field"><label>Histórico</label><input></div>
<div class="field"><label>Arquétipo</label><input></div>
</div>
</div>

<div class="attrs">
<div class="attr-block"><div class="section-title">Atributos Físicos</div>
<div class="attr"><span>Força (FOR)</span><input class="small" type="number"></div>
<div class="attr"><span>Destreza (DES)</span><input class="small" type="number"></div>
<div class="attr"><span>Vigor (VIG)</span><input class="small" type="number"></div></div>
<div class="attr-block"><div class="section-title">Atributos Sociais</div>
<div class="attr"><span>Aparência (APA)</span><input class="small" type="number"></div>
<div class="attr"><span>Carisma (CAR)</span><input class="small" type="number"></div>
<div class="attr"><span>Manipulação (MAN)</span><input class="small" type="number"></div></div>
<div class="attr-block"><div class="section-title">Atributos Mentais</div>
<div class="attr"><span>Percepção (PER)</span><input class="small" type="number"></div>
<div class="attr"><span>Inteligência (INT)</span><input class="small" type="number"></div>
<div class="attr"><span>Raciocínio (RAC)</span><input class="small" type="number"></div></div>
</div>

<div class="pericias-wrap">
<div class="pericias">
<div class="section-title">Perícias</div>
<div id="pericias"></div>
<button onclick="addPericia()">Adicionar Perícia</button>
</div>

<div class="combate">
<div class="section-title">Combate</div>
<table id="armas"><tr><th>Arma</th><th>Dano</th><th>Crítico</th><th>Distância</th><th>Tipo</th><th>Peso</th></tr></table>
<button onclick="addArma()">Adicionar Arma</button>
<div class="section-title" style="margin-top:18px">Status</div>
<div class="status">
<div class="status-box"><label>Vida</label><input type="number"></div>
<div class="status-box"><label>Movimento</label><input type="number"></div>
<div class="status-box"><label>Armadura</label><input type="number"></div>
<div class="status-box"><label>Foco</label><input type="number"></div>
<div class="status-box"><label>Energia</label><input type="number"></div>
</div>
<div class="section-title" style="margin-top:18px">Efeitos</div>
<div class="effects-wrapper">
<div class="effects" id="effects"></div>
</div>
</div>
</div>

<div class="section">
<div class="section-title">Inventário</div>
<div id="inventario" class="list"></div>
<button onclick="addItem()">Adicionar Item</button>
</div>

<div class="section">
<div class="section-title">Habilidades</div>
<div id="habilidades" class="list"></div>
<button onclick="addHabilidade()">Adicionar Habilidade</button>
</div>

<div class="section">
<div class="section-title">Habilidades ETLANS</div>
<div id="etlans" class="list"></div>
<button onclick="addEtlans()">Adicionar Etlans</button>
</div>

<div class="section">
<div class="section-title">Arquétipo</div>
<div class="field"><label>Nome</label><input></div>
<div class="field"><label>Descrição</label><textarea></textarea></div>
</div>

<div class="section">
<div class="section-title">Histórico</div>
<div class="field"><label>Nome</label><input></div>
<div class="field"><label>Descrição</label><textarea></textarea></div>
</div>

<div class="section large-notes">
<div class="section-title">Anotações</div>
<textarea></textarea>
</div>
</div>

<div class="floating">
<button onclick="toggleThemes()">TEMAS</button>
<button onclick="saveSheet()">SALVAR</button>
</div>

<div class="theme-panel" id="themes">
<div class="theme-circle" style="background:#ff5c5c" onclick="setTheme('red')"></div>
<div class="theme-circle" style="background:#e6c15a" onclick="setTheme('gold')"></div>
<div class="theme-circle" style="background:#4cd3a3" onclick="setTheme('emerald')"></div>
<div class="theme-circle" style="background:#c97bff" onclick="setTheme('rose')"></div>
<div class="theme-circle" style="background:#eaeaea" onclick="setTheme('white')"></div>
</div>

<div class="modal" id="modal">
<div class="modal-content">
<h3 id="modalTitle"></h3>
<textarea id="modalDesc"></textarea>
<button onclick="confirmDelete()">EXCLUIR</button>
<button onclick="closeModal()">Fechar</button>
</div>
</div>

<script>
const basePericias=["Acadêmicos","Arma à Distância","Arma Branca","Atletismo","Ciências","Direito","Empatia","Empatia c/ Animais","Esquiva","Etiqueta","Expressão","Finanças","Furtividade","Intimidação","Investigação","Lábia","Liderança","Linguística","Luta","Manha","Medicina","Ocultismo","Ofício","Performance","Política","Prontidão","Resistência","Sobrevivência"];
const efeitos=["Agarrado","Amedrontado","Atordoado","Caído","Cego","Envenenado","Impedido","Inconsciente","Paralisado","Surdo","Fraturado","Sangrando","Em Chamas","Enfeitiçado","Desconsciência"];

let targetDelete=null;

function toggleThemes(){const t=document.getElementById('themes');t.style.display=t.style.display==='flex'?'none':'flex'}
function setTheme(name){document.documentElement.setAttribute('data-theme',name);localStorage.setItem('theme',name)}

function saveSheet(){const data={html:document.getElementById('sheet').innerHTML,theme:localStorage.getItem('theme')||''};localStorage.setItem('etlansSheet',JSON.stringify(data));alert('Ficha salva localmente');}
function loadSheet(){const raw=localStorage.getItem('etlansSheet');if(!raw)return;const d=JSON.parse(raw);document.getElementById('sheet').innerHTML=d.html;if(d.theme)setTheme(d.theme);attachHandlers();}

function openModal(title,el){targetDelete=el;document.getElementById('modalTitle').innerText=title;document.getElementById('modal').style.display='flex'}
function closeModal(){document.getElementById('modal').style.display='none';targetDelete=null}
function confirmDelete(){if(targetDelete)targetDelete.remove();closeModal()}

function addPericia(nome="Nova Perícia"){const d=document.createElement('div');d.className='pericia';d.innerHTML=`<span contenteditable>${nome}</span><input type="number" step="0.01">`;d.ondblclick=()=>openModal('Excluir Perícia',d);document.getElementById('pericias').appendChild(d)}

function addArma(){const t=document.getElementById('armas');const r=t.insertRow();for(let i=0;i<6;i++){const c=r.insertCell();c.innerHTML='<input>';}r.ondblclick=()=>openModal('Excluir Arma',r)}

function addItem(){const d=document.createElement('div');d.className='list-item';d.innerHTML='<input placeholder="Item"><input placeholder="Peso" class="small"><textarea placeholder="Descrição"></textarea>';d.ondblclick=()=>openModal('Excluir Item',d);document.getElementById('inventario').appendChild(d)}

function addHabilidade(){const d=document.createElement('div');d.className='list-item';d.innerHTML='<input placeholder="Nome"><textarea placeholder="Descrição"></textarea>';d.ondblclick=()=>openModal('Excluir Habilidade',d);document.getElementById('habilidades').appendChild(d)}

function addEtlans(){const d=document.createElement('div');d.className='list-item';d.innerHTML='<input placeholder="Nome"><input placeholder="Qtd" class="small"><input placeholder="Custo" class="small"><textarea placeholder="Descrição"></textarea>';d.ondblclick=()=>openModal('Excluir Etlans',d);document.getElementById('etlans').appendChild(d)}

function attachHandlers(){document.querySelectorAll('.pericia').forEach(p=>p.ondblclick=()=>openModal('Excluir Perícia',p));document.querySelectorAll('#armas tr').forEach((r,i)=>{if(i>0)r.ondblclick=()=>openModal('Excluir Arma',r)});document.querySelectorAll('.list-item').forEach(i=>i.ondblclick=()=>openModal('Excluir',i))}

basePericias.forEach(p=>addPericia(p));
efeitos.forEach(e=>{const l=document.createElement('label');l.innerHTML=`<input type="checkbox"> ${e}`;document.getElementById('effects').appendChild(l)});
loadSheet();
</script>
</body>
</html>
