<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ficha ETLANS</title>
  <style>
    :root {
      --bg: #0e0e11;
      --card: #18181f;
      --border: #2a2a35;
      --text: #eaeaf0;
      --muted: #a0a0b0;
      --accent: #6f7cff;
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background: var(--bg);
      color: var(--text);
    }

    h2, h3 {
      margin-top: 0;
      border-bottom: 1px solid var(--border);
      padding-bottom: 4px;
    }

    .container {
      max-width: 1200px;
      margin: auto;
      padding: 16px;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 16px;
    }

    .card {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 12px;
    }

    label {
      font-size: 12px;
      color: var(--muted);
    }

    input, textarea {
      width: 100%;
      background: #0f0f15;
      border: 1px solid var(--border);
      border-radius: 6px;
      padding: 6px;
      color: var(--text);
      margin-bottom: 8px;
    }

    textarea { resize: vertical; min-height: 80px; }

    .grid-3 {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 8px;
    }

    .grid-2 {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 8px;
    }

    .small { width: 60px; }

    button {
      background: var(--accent);
      border: none;
      border-radius: 8px;
      padding: 10px 14px;
      font-weight: bold;
      color: #fff;
      cursor: pointer;
    }

    button.secondary {
      background: #2a2a35;
    }

    .actions {
      position: fixed;
      bottom: 16px;
      right: 16px;
      display: flex;
      gap: 8px;
    }

    table {
      width: 100%;
      border-collapse: collapse;
    }

    th, td {
      border: 1px solid var(--border);
      padding: 6px;
      text-align: left;
    }

    th { color: var(--muted); font-size: 12px; }

    @media (max-width: 600px) {
      .actions { flex-direction: column; }
    }
  </style>
</head>
<body>

<div class="container" id="sheet">

  <div class="card">
    <h2>Identidade</h2>
    <label>Nome do Personagem</label><input data-field="nome" />
    <label>Jogador</label><input data-field="jogador" />
    <label>Arquétipo</label><input data-field="arquetipo" />
    <label>Histórico</label><textarea data-field="historico"></textarea>
  </div>

  <div class="card">
    <h2>Atributos Físicos</h2>
    <div class="grid-3">
      <div><label>FOR</label><input data-field="for" type="number" /></div>
      <div><label>DES</label><input data-field="des" type="number" /></div>
      <div><label>VIG</label><input data-field="vig" type="number" /></div>
    </div>
  </div>

  <div class="card">
    <h2>Atributos Sociais</h2>
    <div class="grid-3">
      <div><label>APA</label><input data-field="apa" type="number" /></div>
      <div><label>CAR</label><input data-field="car" type="number" /></div>
      <div><label>MAN</label><input data-field="man" type="number" /></div>
    </div>
  </div>

  <div class="card">
    <h2>Atributos Mentais</h2>
    <div class="grid-3">
      <div><label>PER</label><input data-field="per" type="number" /></div>
      <div><label>INT</label><input data-field="int" type="number" /></div>
      <div><label>RAC</label><input data-field="rac" type="number" /></div>
    </div>
  </div>

  <div class="card">
    <h2>Perícias</h2>
    <textarea data-field="pericias" placeholder="Acadêmicos, Atletismo, Luta... (valor entre parênteses)"></textarea>
  </div>

  <div class="card">
    <h2>Combate</h2>
    <table>
      <thead><tr><th>Arma</th><th>Dano</th><th>Crítico</th><th>Dist.</th><th>Tipo</th><th>Peso</th></tr></thead>
      <tbody id="armas"></tbody>
    </table>
    <button class="secondary" onclick="addRow('armas')">Adicionar Arma</button>
  </div>

  <div class="card">
    <h2>Status</h2>
    <div class="grid-2">
      <div><label>Vida</label><input data-field="vida" type="number" /></div>
      <div><label>Foco / Energia</label><input data-field="foco" /></div>
      <div><label>Movimento</label><input data-field="movimento" /></div>
      <div><label>Armadura</label><input data-field="armadura" /></div>
    </div>
  </div>

  <div class="card">
    <h2>Habilidades ETLANS</h2>
    <textarea data-field="etlans"></textarea>
  </div>

  <div class="card">
    <h2>Inventário</h2>
    <table>
      <thead><tr><th>Nome</th><th>Qtd</th><th>Custo</th></tr></thead>
      <tbody id="inventario"></tbody>
    </table>
    <button class="secondary" onclick="addRow('inventario')">Adicionar Item</button>
  </div>

  <div class="card">
    <h2>Efeitos Negativos</h2>
    <textarea data-field="efeitos"></textarea>
  </div>

  <div class="card">
    <h2>Anotações</h2>
    <textarea data-field="anotacoes"></textarea>
  </div>

</div>

<div class="actions">
  <button onclick="saveSheet()">Salvar</button>
  <button class="secondary" onclick="loadSheet()">Carregar</button>
</div>

<audio id="click" src="data:audio/wav;base64,UklGRiQAAABXQVZFZm10IBAAAAABAAEAQB8AAIA+AAACABAAZGF0YQAAAAA="></audio>

<script>
  const click = () => document.getElementById('click').play();

  document.addEventListener('click', e => {
    if (e.target.tagName === 'BUTTON') click();
  });

  function addRow(id) {
    const tr = document.createElement('tr');
    tr.innerHTML = '<td><input></td>'.repeat(6);
    document.getElementById(id).appendChild(tr);
  }

  function saveSheet() {
    const data = {};
    document.querySelectorAll('[data-field]').forEach(el => {
      data[el.dataset.field] = el.value;
    });
    data.armas = document.getElementById('armas').innerHTML;
    data.inventario = document.getElementById('inventario').innerHTML;
    localStorage.setItem('etlans-sheet', JSON.stringify(data));
    alert('Ficha salva localmente');
  }

  function loadSheet() {
    const raw = localStorage.getItem('etlans-sheet');
    if (!raw) return;
    const data = JSON.parse(raw);
    document.querySelectorAll('[data-field]').forEach(el => {
      el.value = data[el.dataset.field] || '';
    });
    document.getElementById('armas').innerHTML = data.armas || '';
    document.getElementById('inventario').innerHTML = data.inventario || '';
  }

  loadSheet();
</script>

</body>
</html>
