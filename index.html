<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ficha Etlans RPG</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: Georgia, serif;
            background: linear-gradient(135deg, #0a0a0a 0%, #1a0f0f 100%);
            color: #d4af37;
            min-height: 100vh;
            padding: 20px;
        }
        .container { max-width: 1200px; margin: 0 auto; }
        h1 { font-size: 2.5em; text-align: center; margin: 20px 0; color: #d4af37; text-shadow: 4px 4px 8px rgba(0,0,0,0.8); }
        p { text-align: center; margin-bottom: 20px; color: #a0826d; }
        .btn { background: #6b4423; border: 1px solid #8b4513; color: #d4af37; padding: 10px 20px; cursor: pointer; border-radius: 4px; margin: 5px; font-family: Georgia, serif; font-size: 0.95em; }
        .btn:hover { background: #8b5a2b; }
        .char-list { display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 15px; margin: 20px 0; }
        .char-card { background: linear-gradient(135deg, #2a1810 0%, #1a0f0a 100%); border: 2px solid #8b4513; border-radius: 8px; padding: 15px; }
        .char-card h3 { color: #d4af37; margin-bottom: 10px; }
        .char-actions { display: flex; gap: 10px; margin-top: 10px; }
        #menu { display: block; }
        #sheet { display: none; }
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 1000; align-items: center; justify-content: center; }
        .modal.active { display: flex; }
        .modal-content { background: linear-gradient(135deg, #2a1810 0%, #1a0f0a 100%); border: 2px solid #8b4513; border-radius: 8px; padding: 30px; max-width: 500px; width: 90%; }
        .modal-content h2 { color: #d4af37; margin-bottom: 15px; }
        .form-group { margin: 15px 0; }
        .form-group label { display: block; color: #a0826d; text-transform: uppercase; margin-bottom: 5px; font-size: 0.85em; }
        .form-group input, .form-group textarea { width: 100%; background: #0a0a0a; border: 1px solid #6b4423; color: #d4af37; padding: 8px; border-radius: 3px; font-family: Georgia, serif; }
        .blk { background: linear-gradient(135deg, #1a1a1a 0%, #0f0f0f 100%); border: 1px solid #8b4513; border-radius: 6px; padding: 15px; margin: 15px 0; }
        .blk h2 { color: #d4af37; font-size: 1.2em; margin-bottom: 10px; border-bottom: 2px solid #6b4423; padding-bottom: 8px; }
    </style>
</head>
<body>
    <div class="container">
        <div id="menu">
            <h1>ETLANS RPG</h1>
            <p>Sistema de Fichas</p>
            <div style="text-align: center; margin: 20px 0;">
                <button class="btn" onclick="openCreateModal()">Criar Novo Personagem</button>
            </div>
            <div id="charList" class="char-list"></div>
        </div>

        <div id="sheet" style="display: none;">
            <h1 id="charName">Ficha</h1>
            <button class="btn" onclick="closeSheet()" style="margin: 10px;">← Voltar ao Menu</button>
            <div id="sheetContent"></div>
        </div>
    </div>

    <div id="createModal" class="modal">
        <div class="modal-content">
            <h2>Criar Novo Personagem</h2>
            <div class="form-group">
                <label>Nome</label>
                <input type="text" id="newCharName" placeholder="Nome do personagem">
            </div>
            <button class="btn" onclick="createCharacter()" style="width: 48%; margin-right: 2%;">Criar</button>
            <button class="btn" onclick="closeCreateModal()" style="width: 48%;">Cancelar</button>
        </div>
    </div>

    <script>
        let characters = [];
        let currentId = null;

        function loadData() {
            const saved = localStorage.getItem('etlans_chars');
            characters = saved ? JSON.parse(saved) : [];
            renderList();
        }

        function saveData() {
            localStorage.setItem('etlans_chars', JSON.stringify(characters));
        }

        function renderList() {
            const list = document.getElementById('charList');
            list.innerHTML = '';
            characters.forEach(char => {
                const card = document.createElement('div');
                card.className = 'char-card';
                card.innerHTML = `
                    <h3>${char.name}</h3>
                    <p>${char.classe || 'Sem classe'}</p>
                    <div class="char-actions">
                        <button class="btn" onclick="openCharacter(${char.id})">Abrir</button>
                        <button class="btn" onclick="deleteCharacter(${char.id})">Apagar</button>
                    </div>
                `;
                list.appendChild(card);
            });
        }

        function openCreateModal() {
            document.getElementById('createModal').classList.add('active');
        }

        function closeCreateModal() {
            document.getElementById('createModal').classList.remove('active');
            document.getElementById('newCharName').value = '';
        }

        function createCharacter() {
            const name = document.getElementById('newCharName').value.trim();
            if (!name) { alert('Digite um nome'); return; }
            const char = { id: Date.now(), name: name, classe: '' };
            characters.push(char);
            saveData();
            closeCreateModal();
            openCharacter(char.id);
        }

        function openCharacter(id) {
            const char = characters.find(c => c.id === id);
            if (!char) return;
            currentId = id;
            document.getElementById('menu').style.display = 'none';
            document.getElementById('sheet').style.display = 'block';
            document.getElementById('charName').textContent = char.name;
            document.getElementById('sheetContent').innerHTML = `
                <div class="blk">
                    <h2>Informações Básicas</h2>
                    <div class="form-group">
                        <label>Nome</label>
                        <input type="text" value="${char.name}" onchange="updateChar('name', this.value)">
                    </div>
                    <div class="form-group">
                        <label>Classe</label>
                        <input type="text" value="${char.classe || ''}" onchange="updateChar('classe', this.value)">
                    </div>
                </div>
                <button class="btn" onclick="saveSheet()" style="margin: 10px 0;">Salvar Ficha</button>
            `;
        }

        function updateChar(field, value) {
            const char = characters.find(c => c.id === currentId);
            if (char) char[field] = value;
        }

        function saveSheet() {
            saveData();
            alert('Ficha salva!');
        }

        function closeSheet() {
            saveData();
            document.getElementById('sheet').style.display = 'none';
            document.getElementById('menu').style.display = 'block';
            renderList();
        }

        function deleteCharacter(id) {
            if (!confirm('Tem certeza que quer apagar?')) return;
            characters = characters.filter(c => c.id !== id);
            saveData();
            renderList();
        }

        window.addEventListener('load', loadData);
    </script>
</body>
</html>
